<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mot de passe oublié</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body{
    font-family:Poppins;
    background:linear-gradient(135deg,#6a11cb,#2575fc);
    height:100vh;display:flex;align-items:center;justify-content:center;
}
.card{
    background:white;
    padding:30px;
    border-radius:20px;
    width:360px;
    box-shadow:0 20px 40px rgba(0,0,0,.3);
    text-align:center;
}
input{width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;margin-bottom:15px;}
button{
    width:100%;padding:12px;border:none;border-radius:50px;
    background:#2575fc;color:white;font-weight:600;cursor:pointer;
}
.msg{margin-top:10px;font-size:14px}
</style>
</head>
<body>

<div class="card">
    <h2>Mot de passe oublié</h2>
    <p>Entrez votre email pour recevoir un lien</p>

    <input type="email" id="email" placeholder="Votre email" required>
    <button onclick="sendReset()">Envoyer le lien</button>
    <div class="msg" id="msg"></div>
</div>

<script>
    
function sendReset(){
    const email=document.getElementById("email").value;
    const form=new FormData();
    form.append("email",email);
const API_BASE = "https://tiringly-relational-lilyana.ngrok-free.dev";

    fetch("${API_BASE}/forgot",{
        method:"POST",
        body:form
    })
    .then(r=>r.json())
    .then(d=>{
        if(d.success){
            document.getElementById("msg").innerHTML =
              "Lien généré (voir console serveur)<br><small>"+d.reset_link+"</small>";
        }else{
            document.getElementById("msg").innerText=d.message;
        }
    });
}
</script>
</body>
</html>
